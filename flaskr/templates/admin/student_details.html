{% extends "shared/user_screen_layout.html" %}

{% block content_block %}



<!-- put in centered div -->
<div class="text-center">
    <h2> K-Number: {{udata.k_number}}</h2> 
    <h2> First Name: {{udata.first_name}}</h2> 
    <h2> Last Name: {{udata.last_name}}</h2> 
    <h2> Age: {{udata.age}}</h2> 
</div>
<br />
<div class="container">
    <h2> Hobbies:</h2>
    <ul>
        {% for hobby in hobbies %}
        <li>{{ hobby.hobby }}</li>
        {% endfor %}
    </ul>
    <br />
    <h2> Academic Interests: </h2>
    <ul>
        {% for interest in interests %}
        <li>{{ interest.interest }}</li>
        {% endfor %}
    </ul>
</div>
<br />
{% if matches|length  %}
<table class="table table-striped table-hover" id='table'>
    <thead>
        <tr colspan=5><h1 class='text-center'>{% if udata.is_mentor %} {{"Mentees"}} {% else %} {{"Mentors"}}{% endif %}</h1></tr>
<tr>
    <th scope="col" class="text-center">K Number</th>
    <th scope="col">First Name</th>
    <th scope="col">Last Name</th>
    <th scope="col">Year</th> 
    <th scope="col" class="text-center">Action</th>
</tr>
</thead>
<tbody id='tbody'>
    {% for student in matches %} 
    <tr>
        <td>{{student.k_number}}</td>
        <td>{{student.first_name}}</td>
        <td>{{student.last_name}}</td>
        <td>{{student.year_study}}</td>
<form method="POST" action='{{url_for("view_student_details")}}'>
    <input type='hidden' name='knum' value='{{udata.k_number}}'></input>
    <input type="hidden" name='{% if udata.is_mentor %}{{"torNum"}}{% else %}{{"teeNum"}}{% endif %}' value="{{udata.k_number}}"></input>
    <input type="hidden" name='{% if udata.is_mentor %}{{"teeNum"}}{% else %}{{"torNum"}}{% endif %}' value="{{student.k_number}}"></input>
    <td><input type="submit" class="btn btn-lg btn-block btn-primary" name='rmAlloc' onclick='return rmAllConf()' value="Remove Allocation"></input></td>
</form>
</tr>        
{% endfor %}
</tbody>
</table>
{% else %}
<h1 class='text-center'> No Allocations </h1>
{% endif %}
<form method="POST" action="{{url_for("manually_assign")}}">
    <input type="submit" class="btn btn-lg btn-block btn-primary my-3" name='manAlloc' value="Manually Assign Allocation"></input> 
    <input type='hidden' name='knum' value='{{udata.k_number}}'></input>
</form>
<br />
{% if udata.is_admin  %}
<form method="POST" action="{{url_for('view_student_details')}}">
    <input type="hidden" name="knum" value="{{udata.k_number}}"></input>
    <input type="submit" class="btn btn-lg btn-block btn-primary my-3" name='rmAdmin' onclick='return rmAdConf()' value="Remove Admin Status" /> 
</form>
{% else %}
<form method="POST" action="{{url_for('view_student_details')}}">
    <input type="hidden" name="knum" value="{{udata.k_number}}"></input>
    <input type="submit" class="btn btn-lg btn-block btn-primary my-3" name='mkAdmin' onclick='return mkAdConf()' value="Make Admin" /> 
</form>
{% endif %}
<br />
<form method="POST" action="{{url_for('delete_student_details')}}">
    <input type="hidden" name="knum" value="{{udata.k_number}}"></input>
    <input type="submit" class="btn btn-lg btn-block btn-primary my-3" onclick='return delConf()' value="Delete Account And Data" /> 
</form>

<script>
    function delConf() {
        return confirm("This Will Delete The Account, Allocations And All Other Associated Data In Compliance With GDPR Policy. Do You Wish To Continue?")
    }

    function mkAdConf() {
        return confirm("Grant Account Admin Status?")
    }

    function rmAdConf() {
        return confirm("Remove Admin Status From Account?")
    }

    function rmAllConf() {
        return confirm("Remove Match?")
    }
</script>


{% endblock content_block %}

