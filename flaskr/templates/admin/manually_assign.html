{% extends "shared/user_screen_layout.html" %}

{% block content_block %}

<!-- put in centered div -->
<div class="text-center">
    <h2> K-Number: {{udata.k_number}}</h2> 
    <h2> First Name: {{udata.first_name}}</h2> 
    <h2> Last Name: {{udata.last_name}}</h2> 
    <h2> Age: {{udata.age}}</h2> 
</div>
<br />
<div class="container">
    <h2> Hobbies:</h2>
    <ul>
        {% for hobby in hobbies %}
        <li>{{ hobby.hobby }}</li>
        {% endfor %}
    </ul>
    <br />
    <h2> Academic Interests: </h2>
    <ul>
        {% for interest in interests %}
        <li>{{ interest.interest }}</li>
        {% endfor %}
    </ul>
</div>
<br />
{% if potentials|length  %}
<table class="table table-striped table-hover" id='table'>
    <thead>
        <tr colspan=5><h1 class='text-center'>Potential {% if udata.is_mentor %} {{"Mentees"}} {% else %} {{"Mentors"}}{% endif %} To Match</h1></tr>
<tr>
<tr>
<div class="text-center">
    Filter By Name:
    <input type='text' id='nameFilt' onkeyup='return filterName()'/>
</div></tr>
<th scope="col" class="text-center">K Number</th>
<th scope="col">First Name</th>
<th scope="col">Last Name</th>
<th scope="col">Gender</th>
<th scope="col">Year</th> 
<th scope="col">Already Matched</th>
<th scope="col" class="text-center">Action</th>
</tr>
</thead>
<tbody id='tbody'>
    {% for student in potentials %} 
    <tr>
        <td>{{student.k_number}}</td>
        <td>{{student.first_name}}</td>
        <td>{{student.last_name}}</td>
        <td>{{student.gender}}</td>
        <td>{{student.year_study}}</td>
        <td>{{student.matches}}</td>
<form method="POST" name='assign' action={{url_for("view_student_details")}}>
    <input type="hidden" name='{% if udata.is_mentor %} {{"torNum"}} {% else %} {{"teeNum"}}{% endif %}' value="{{udata.k_number}}"></input>
    <input type="hidden" name='{% if udata.is_mentor %} {{"teeNum"}} {% else %} {{"torNum"}}{% endif %}' value="{{student.k_number}}"></input>
    <td><input type="submit" class="btn btn-lg btn-block btn-primary" value="Assign"></input></td>
</form>
</tr>        
{% endfor %}
</tbody>
</table>
{% else %}
<h1 class='text-center'> No Students To Match With </h1>
{% endif %}
<br />
<br />
<form method="POST" action="{{url_for('view_student_details')}}">
    <input type="hidden" name="knum" value="{{udata.k_number}}"></input>
    <input type="submit" class="btn btn-lg btn-block btn-primary my-3" value="back"/> 
</form>

<script>
    function ele(id) {
        return      document.getElementById(id)
    }

    function filterName() {
        var reg = new RegExp(".*" + ele("nameFilt").value + ".*", "i")
        var tb = ele('tbody')
        for (var i = 0, row; row = tb.rows[i]; i++) {
            if (reg.test(row.cells[1].innerHTML + " " + row.cells[2].innerHTML)) {   // need to impl show/no show if other filter on 
                row.style.display = ''
            } else {
                row.style.display = 'none'
            }
        }
    }
</script>


{% endblock content_block %}

